# Comms Table

The following tables show the interfaces definitions for each environment:

## FSFEUP 01

Code | Interface | Channel Type | Description | Type of Information
-----|-----------|--------------|-------------|--------------------
3D Point Cloud | /rslidar_points | TOPIC_MESSAGE : sensor_msgs/msg/PointCloud2 | Point cloud from LiDAR | Input
3-Axis IMU | /vehicle/imu_yaw_acc_y or /vehicle/imu_roll_acc_x or /vehicle/imu_pitch_acc_z | TOPIC_MESSAGE : custom_interfaces/msg/ImuData | Accelerations and angular velocities | Input
Wheel States | /wheel_states | TOPIC_MESSAGE : /fs_msgs/msg/WheelStates (comes separate in pairs, needs synchronization) | Input
Wheel Speeds | /vehicle/rl_rpm or /vehicle/rr_rpm | TOPIC_MESSAGE : custom_interfaces/msg/WheelRPM | wheel speeds (comes separate, needs synchronization) | Input
Torque Sensor | - | - | Rotation of the electric motor | Input
Steering Angle | /vehicle/bosch_steering_angle | TOPIC_MESSAGE : custom_interfaces/msg/WheelRPM | Steering angle from the Bosch Absolute SA Sensor | Input
Go Signal | /vehicle/operational_status | TOPIC_MESSAGE : custom_interfaces/msg/OperationalStatus | Information on the AS Status and mission | Input
Mission Finished | /as_srv/mission_finished | SERVICE : std_srvs/srv/Trigger | Signal sent by the AS Main Pipeline that notifies the vehicle of the end of the mission | Output
Emergency | /as_srv/emergency | SERVICE : std_srvs/srv/Trigger | Signal sent by the AS Main Pipeline in case of detection of a critical error | Output
Control Command | /as_msgs/controls | TOPIC_MESSAGE : custom_interfaces/msg/ControlCommand | Contains the steering ang throttle commands for the vehicle | Output

## System Internal

Code | Interface | Channel Type | Description
-----|-----------|--------------|------------
Vehicle & Pose | /state_estimation/vehicle_state | TOPIC_MESSAGE : custom_interfaces/msg/VehicleState | Pose and velocities of the vehicle, estimated by state estimation
Path | /path_planning/path | TOPIC_MESSAGE : custom_interfaces/msg/PathPointArray | Path with coordinates of points and velocities from planning
Perception Output | /perception/cones | TOPIC_MESSAGE : custom_interfaces/msg/ConeArray | Relative position of cones to the LiDAR
Cone Map | /state_estimation/map | TOPIC_MESSAGE : custom_interfaces/msg/ConeArray | Absolute map of the track from state estimation

## PacSim

Code | Interface | Channel Type | Description | Type of Information
-----|-----------|--------------|-------------|--------------------
3-Axis IMU | /pacsim/imu/cog_imu | TOPIC_MESSAGE : sensor_msgs/msg/IMU | Accelerations and angular velocities | Input
Wheel States | /wheel_states | TOPIC_MESSAGE : /fs_msgs/msg/WheelStates | Input
Wheel Speeds | /pacsim/wheelspeeds | TOPIC_MESSAGE : pacsim/msg/wheels | wheel speeds | Input
Torque Sensor | - | - | Rotation of the electric motor | Input
Steering Angle | /pacsim/steeringFront and /pacsim/steeringRear | TOPIC_MESSAGE : pacsim/msg/StampedScalar | Steering angle from front and rear axis | Input
Perception Mock | /pacsim/perception/<sensor_name>/landmarks | TOPIC_MESSAGE : pacsim/msg/PerceptionDetections | Relative position of cones to the LiDAR, generated by the sim with artificial noise | Mock
Velocity Mock | /pacsim/velocity | TOPIC_MESSAGE : geometry_msgs/msg/TwistWithCovarianceStamped | Velocity of the vehicle, generated by the sim with artificial noise | Mock
Map Ground Truth | /pacsim/map | TOPIC_MESSAGE : visualization_msgs/msg/MarkerArray | Absolute map of the track with no error | Groundtruth
Mission Finished | /pacsim/finish_signal | SERVICE : std_srvs/srv/Empty | Signal sent by the AS Main Pipeline that notifies the vehicle of the end of the mission | Output
Steering Command | /pacsim/steering_setpoint | TOPIC_MESSAGE : pacsim/msg/StampedScalar | Contains the steering commands for the vehicle | Output
Throttle Command | /pacsim/torques_max | TOPIC_MESSAGE : pacsim/msg/Wheels | Contains the throttle commands for the vehicle | Output

**Note:** pose groundtruth can be taken from the transform from the map to the car

## EUFS Sim

Code | Interface | Channel Type | Description | Type of Information
-----|-----------|--------------|-------------|--------------------
3-Axis IMU | /imu/data | TOPIC_MESSAGE : sensor_msgs/msg/IMU | Accelerations and angular velocities | Input
Camera | ? | ? | Images from ZED Stereo Camera | Input
3D Point Cloud | ? | TOPIC_MESSAGE : sensor_msgs/msg/PointCloud2 | Point cloud from LiDAR | Input
Camera Info | /custom_camera_info | TOPIC_MESSAGE : sensor_msgs/msg/CameraInfo | Camera Calibration information | Input
Joint State | /eufs/joint_states | TOPIC_MESSAGE : sensor_msgs/msg/JointState | Wheel Joint States (Torque information) | Topic
Noisy Bounding Boxes | /noisy_bounding_boxes | TOPIC_MESSAGE : eufs_msgs/msg/BoundingBoxes | Bounding Boxes of the cone detection on the camera with noise | Mock
Simulated Kinematic and Dynamic States (e. g. velocity) | /odometry_integration/car_state | TOPIC_MESSAGE : eufs_msgs/msg/CarState | Dynamic and Kinematic State of the car | Groundtruth / Mock
Mission Finished | /ros_can/mission_completed | TOPIC_MESSAGE : std_msgs/msg/Bool | Signal sent by the AS Main Pipeline that notifies the vehicle of the end of the mission | Output
Go Signal | /ros_can/state | TOPIC_MESSAGE : eufs_msgs/msg/CanState | Information on the AS Status and mission | Input
Wheel Speeds | /ros_can/wheel_speeds | TOPIC_MESSAGE : eufs_msgs/msg/WheelSpeedsStamped | Wheel Speeds and Steering information with noise | INPUT
Perception Mock | /camera_0/cones or /camera_1/cones | TOPIC_MESSAGE : eufs_msgs/msg/ConeArrayWithCovariance | Relative position of cones to the Camera, generated by the sim with artificial noise (camera noise) | Mock
Perception Mock | /cones | TOPIC_MESSAGE : eufs_msgs/msg/ConeArrayWithCovariance | Relative position of cones to the camera and LiDAR, generated by the sim with artificial noise | Mock
Bounding Boxes Ground Truth | /ground_truth/bounding_boxes | TOPIC_MESSAGE : eufs_msgs/msg/BoundingBoxes | Bounding Boxes of the cone detection on the camera with noise | Groundtruth
Perception Ground Truth | /ground_truth/cones | TOPIC_MESSAGE : eufs_msgs/msg/ConeArrayWithCovariance | Relative position of cones to the camera and LiDAR ground truth | Groundtruth
Odometry Groundtruth | /ground_truth/odom | TOPIC_MESSAGE : nav_msgs/msg/Odometry | Pose groundtruth | Groundtruth
Wheel States | /ground_truth/state | TOPIC_MESSAGE : eufs_msgs/msg/CarState | Dynamic and Kinematic car state ground truth (apparently repeated) | Groundtruth
Map Ground Truth | ground_truth/map | TOPIC_MESSAGE : eufs_msgs/msg/ConeArrayWithCovariance | Absolute map of the track with no error | Groundtruth
Wheel Speeds Ground Truth | /ground_truth/wheel_speeds | TOPIC_MESSAGE : eufs_msgs/msg/WheelSpeedsStamped | Wheel speeds and steering ground truth | Groundtruth
Control Command | /cmd | TOPIC_MESSAGE : ackermann_msgs/msg/AckermannDriveStamped | Contains the steering ang throttle commands for the vehicle | Output


## FSDS


Code | Interface | Channel Type | Description | Type of Information
-----|-----------|--------------|-------------|--------------------
3D Point Cloud | /lidar/Lidar1 | TOPIC_MESSAGE : sensor_msgs/msg/PointCloud2 | Point cloud from LiDAR | Input
3-Axis IMU | /imu | TOPIC_MESSAGE : sensor_msgs/msg/IMU | Accelerations and angular velocities | Input
Wheel States | /wheel_states | TOPIC_MESSAGE : /fs_msgs/msg/WheelStates | Wheel speeds and steering angle | Input
Go Signal | /signal/go | TOPIC_MESSAGE : /fs_msgs/msg/GoSignal | Information on the AS Status and mission | Input
Pose Ground Truth | /fsds/testing_only/odom | TOPIC_MESSAGE : nav_msgs/msg/Odom | Pose ground truth | Groundtruth
Mission Finished | /signal_finished | TOPIC_MESSAGE : fs_msgs/msg/FinishedSignal | Signal sent by the AS Main Pipeline that notifies the vehicle of the end of the mission | Output
Control Command | /control_command | TOPIC_MESSAGE : fs_msgs/msg/ControlCommand | Contains the steering ang throttle commands for the vehicle | Output