<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Formula Student Autonomous Systems: Evaluator Package</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Formula Student Autonomous Systems
   </div>
   <div id="projectbrief">The code for the main driverless system</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('db/dca/md_src_2evaluator_2_r_e_a_d_m_e.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Evaluator Package</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md82"></a> </p>
<h1><a class="anchor" id="autotoc_md83"></a>
Package Information</h1>
<h2><a class="anchor" id="autotoc_md84"></a>
Description</h2>
<p>This package contains the evaluator node, used to evaluate the AS main pipeline in real time, with aid of simulation environments and other data.</p>
<h2><a class="anchor" id="autotoc_md85"></a>
Folder Structure</h2>
<ul>
<li><a href="../../evaluator/adapter.py">adapter</a>: <a class="el" href="../../d3/d7f/class_adapter.html" title="Class that handles the communication between the SpeedEstimation node and the other nodes in the syst...">Adapter</a> base class to change ROS2 interfaces according to the simulator or environment</li>
<li><a href="../../evaluator/pacsim_adapter.py">pacsim_adapter</a>: <a class="el" href="../../d3/d7f/class_adapter.html" title="Class that handles the communication between the SpeedEstimation node and the other nodes in the syst...">Adapter</a> for PacSim simulator</li>
<li><a href="../../evaluator/eufs_adapter.py">eufs_adapter</a>: <a class="el" href="../../d3/d7f/class_adapter.html" title="Class that handles the communication between the SpeedEstimation node and the other nodes in the syst...">Adapter</a> for EUFS simulator</li>
<li><a href="../../evaluator/fsds_adapter.py">fsds_adapter</a>: <a class="el" href="../../d3/d7f/class_adapter.html" title="Class that handles the communication between the SpeedEstimation node and the other nodes in the syst...">Adapter</a> for FSDS simulator</li>
<li><a href="../../evaluator/vehicle_adapter.py">vehicle_adapter</a>: <a class="el" href="../../d3/d7f/class_adapter.html" title="Class that handles the communication between the SpeedEstimation node and the other nodes in the syst...">Adapter</a> for the vehicle</li>
<li><a href="../../evaluator/formats.py">formats</a>: Functions for formatting messages into a common format</li>
<li><a href="../../evaluator/metrics.py">metrics</a>: Functions for metrics calculation</li>
<li><a href="../../evaluator/adapter_maps.py">adapter_maps</a>: Maps for adapter configurations</li>
<li><a href="../../evaluator/evaluator.py">evaluator</a>: Evaluator node class</li>
</ul>
<h2><a class="anchor" id="autotoc_md86"></a>
Launch Configurations</h2>
<ul>
<li>[evaluator-eufs.launch.py]: evaluator with adapters for EUFS SIM</li>
<li>[evaluator-pacsim.launch.py]: evaluator with adapters for PacSim</li>
<li>[evaluator-fsds.launch.py]: evaluator with adapters for FSDS</li>
</ul>
<h1><a class="anchor" id="autotoc_md87"></a>
Design</h1>
<p>The structure of the node is quite simple and depicted by the following class diagram:</p>
<p><img src="../../../../docs/diagrams/sim-inf/evaluator-class-diagram.drawio.svg" alt="Class Diagram" style="pointer-events: none;" class="inline"/></p>
<p>The way the system works can be explained with the aid of the following sequence diagram:</p>
<p><img src="../../../../docs/diagrams/sim-inf/evaluator-sequence-diagram.drawio.svg" alt="Sequence Diagram" style="pointer-events: none;" class="inline"/></p>
<h2><a class="anchor" id="autotoc_md88"></a>
Roles of Adapters vs. the Evaluator Class</h2>
<p>The Evaluator node class only creates Subscribers for the topics intrinsic to the system (ex. topics from the Mocker Node).</p>
<p>Other subscriptions that depend on the simulator topics are all made in the adapters, as well as the subsequent linkage to callbacks. The callbacks in the adapters simply recieve the messages in simulator-dependent format, and transform them into a standard format. The standardized messages are then used in the evaluator node so that metrics can be calculated and published.</p>
<p>This is true for all but the control node, which for simplicity reasons sends all the information necessary for evaluation in a separate message, as it does not use simulation data to evaluate itself.</p>
<h2><a class="anchor" id="autotoc_md89"></a>
Complete Evaluation System Diagram</h2>
<p>The concept of the complete evaluation system can be seen in the following diagram:</p>
<p><img src="../../../../docs/diagrams/sim-inf/evaluation-system.drawio.svg" alt="System Diagram" style="pointer-events: none;" class="inline"/></p>
<h2><a class="anchor" id="autotoc_md90"></a>
Results</h2>
<p>The metrics will be published in <code>/evaluator/*</code> topics.</p>
<h1><a class="anchor" id="autotoc_md91"></a>
How to Run</h1>
<h2><a class="anchor" id="autotoc_md92"></a>
Install Dependencies</h2>
<div class="fragment"><div class="line">./dependencies_install.sh</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md93"></a>
Compiling</h2>
<div class="fragment"><div class="line">colcon build --packages-up-to evaluator</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md94"></a>
Testing</h2>
<div class="fragment"><div class="line">colcon test --packages-select evaluator # use event-handler=console_direct+ for imediate output</div>
</div><!-- fragment --><p>To check test results: </p><div class="fragment"><div class="line">colcon test-result --all --verbose</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md95"></a>
Running</h2>
<p>Use a launch file:</p>
<div class="fragment"><div class="line">source ./install/setup.bash # If in a new terminal</div>
<div class="line">ros2 launch evaluator evaluator-eufs.launch.py</div>
</div><!-- fragment --><p>or run directly:</p>
<div class="fragment"><div class="line">source ./install/setup.bash # If in a new terminal</div>
<div class="line">ros2 run evaluator evaluator</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
